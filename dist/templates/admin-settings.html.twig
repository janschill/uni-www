{% extends "layout.html.twig" %}

{% block title %}Settings{% endblock %}
{% block head %}
    {{ parent() }}
{% endblock %}
{% block content %}
        <section class="admin">
            {% include 'admin-aside.html.twig' %}

            <article class="admin__article">
                <h3>
                    Settings
                </h3>

                <h4>Tags</h4>
                <table class="tags">
                  {% for tag in tags %}
                    <tr>
                      <td>{{ tag.name }}</td>
                      <td>Delete</td>
                    </tr>
                  {% endfor %}

                </table>

                <ul>
                </ul>
                <form class="" action="" method="post">
                  <input type="text" name="tag" placeholder="new Tag"></input>
                  <input type="submit" value="Add"></input>
                </form>

                <h4>Categories</h4>
                <ul>
                {% for category in categories %}
                  <li>{{ category.name }}</li>
                {% endfor %}
                </ul>
                <form class="" action="" method="post">
                  <input type="text" name="category" placeholder="new Category"></input>
                  <input type="submit" value="Add"></input>
                </form>


              <table>
                <tr>
                  <th>Users</th>
                  {% for permission in permissions %}
                  <th>{{ permission.permission }}</th>
                  {% endfor %}
                </tr>
                {% for user in users %}
                  <tr>
                    <td>{{ user.username }}</td>
                    {% for permission in permissions %}
                      {% set selected = false %}
                      {% for userpermission in userpermissions if selected == false %}
                        {% if userpermission.username == user.username and userpermission.permission == permission.permission  %}
                          {% set selected = true %}
                        {% endif %}
                      {% endfor %}

                      <td><input type="checkbox"{% if selected %}checked{% endif %}></td>
                    
                    {% endfor %}
                  </tr>
                {% endfor %}
              </table>


                <h4>Users</h4>
                <ul>
                {% for user in users %}
                  <li>{{ user.username }}</li>
                {% endfor %}
                </ul>
                <form class="" action="" method="post">
                  <input type="text" name="username" placeholder="Username"></input>
                  <input type="password" name="password" placeholder="Password"></input>                  
                  <input type="submit" value="Add"></input>
                </form>

                <h4>Permissions</h4>
                <ul>
                {% for permission in permissions %}
                  <li>{{ permission.permission }}</li>
                {% endfor %}
                </ul>
                <form class="" action="" method="post">
                  <input type="text" name="category" placeholder="new Category"></input>
                  <input type="submit" value="Add"></input>
                </form>


              </article>
        </section>

{% endblock %}